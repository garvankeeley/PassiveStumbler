<!DOCTYPE html>
<html lang="en">
<head>
	<title>Geolocation watchPosition test</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width; initial-scale=1.0;" />

	<script>
	function getLocation()
	{
		document.getElementById('output').innerHTML +='watching for location...<br>';
		watchID = navigator.geolocation.watchPosition(
			foundLocation,
			errorLocation, 
			{
				enableHighAccuracy: false, 
				maximumAge: 30000, 
				timeout: 27000 
			}
		);
	}

	function foundLocation(e) 
	{
		var op = document.getElementById('output');

		op.innerHTML += 'Accuracy: '+e.coords.accuracy+'<br>';
		op.innerHTML += 'Altitude: '+e.coords.altitude+'<br>';
		op.innerHTML += 'AltitudeAccuracy: '+e.coords.altitudeAccuracy+'<br>';
		op.innerHTML += 'Heading: '+e.coords.heading+'<br>';
		op.innerHTML += 'Latitude: '+e.coords.latitude+'<br>';
		op.innerHTML += 'Longitude: '+e.coords.longitude+'<br>';
		op.innerHTML += 'Speed: '+e.coords.speed+'<br>';
		op.innerHTML += '--------------------<br>';

		window.navigator.geolocation.clearWatch(watchID);

		if(document.getElementById('stopWatching').checked!=true)
			getLocation();
	}

	function errorLocation() {
		document.write('error');
	}


	window.onload = function() {
		if (navigator.geolocation) 
		{
			var watchID;
			getLocation();
		} 
		else
			document.write("Your browser doesn't support HTML5 geolocation API.");
	};

   </script>
</head>

<body>
<label for="stopWatching">Stop Watching?</label>
<input type="checkbox" id="stopWatching" value="on">

<p id="output"></p>

</body>
</html>
