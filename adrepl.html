<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <script type="application/javascript">

    function LL(x) { console.log(x);}

 /*   function receiveMessage(event) {
        console.log('parent got message!');
        var images = event.data;
        var result = "";
        for (var i = 0; i < images.length; i++) {
            result += '<p>' +images[i] + '</p>';
        }
        document.body.innerHTML += '<div>' + result + '</div>';
    }
  */

    window.addEventListener("message", receiveMessage, false);

    window.onload = function () {
//      setTimeout(function() { $('#foo').contents().find('html').html("LALALA"); }, 3000);
      var frames = window.frames;
      for (var i = 0; i < frames.length; i++) {
          frames[i].postMessage("maindoc-message-getimages", "*");
      }
    }

//function receive(event){
//    var data = event.data;
//    if(typeof(window[data.func]) == "function"){
//        window[data.func].call(null, data.params[0]);
//    }
//}

</script>
<body>
    Main page<p></p>
    <iframe id='foo' src="http://garvankeeley.github.io/web/adrepl_iframe.html" width="600" height="400"></iframe>
</body>
</html>
