<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <script type="application/javascript">

    function LL(x) { console.log(x);}

 /*   function receiveMessage(event) {
        console.log('parent got message!');
        var images = event.data;
        var result = "";
        for (var i = 0; i < images.length; i++) {
            result += '<p>' +images[i] + '</p>';
        }
        document.body.innerHTML += '<div>' + result + '</div>';
    }
  */

    window.addEventListener("message", receiveMessage, false);

    window.onload = function () {
//      setTimeout(function() { $('#foo').contents().find('html').html("LALALA"); }, 3000);
      var frames = window.frames;
      for (var i = 0; i < frames.length; i++) {
          frames[i].postMessage("maindoc-message-getimages", "*");
      }
    }

//function receive(event){
//    var data = event.data;
//    if(typeof(window[data.func]) == "function"){
//        window[data.func].call(null, data.params[0]);
//    }
//}

</script>
<body>
    Main page<p></p>
    <iframe id='foo' src="http://garvankeeley.github.io/web/adrepl_iframe.html" width="600" height="400"></iframe>
    <script>
var _brave_adInfo = {"news.yahoo.com":[{"width":728,"height":90,"replaceId":"yom-ad-LDRB"},{"width":300,"height":250,"replaceId":"yom-ad-LREC"},{"width":300,"height":250,"replaceId":"yom-ad-LREC2"}],"rd.com":[{"width":300,"height":250,"replaceId":"google_ads_iframe_/7234/rdg/homepage_0__container__"},{"width":300,"height":250,"replaceId":"rdg_homepage-auto-gen-id-2"},{"width":300,"height":250,"replaceId":"rdg_homepage-auto-gen-id-3"}],"slashdot.org":[{"width":728,"height":90,"replaceId":"div-gpt-ad-728x90_a"},{"width":728,"height":90,"replaceId":"div-gpt-ad-728x90_b"},{"width":300,"height":250,"replaceId":"div-gpt-ad-300x250_a"},{"width":300,"height":250,"replaceId":"slashdot_deals-content"},{"width":300,"height":250,"replaceId":"div-gpt-ad-300x250_b"},{"width":300,"height":250,"replaceId":"div-gpt-ad-300x250_c"},{"width":300,"height":250,"replaceId":"div-gpt-ad-300x250_d"}],"cnn.com":[{"width":300,"height":250,"replaceId":"google_ads_iframe_/8663477/CNN/homepage_1__container__"},{"width":300,"height":250,"replaceId":"ad_rect_btf_02"}]};

for (var key in _brave_adInfo) {
  if (_brave_adInfo.hasOwnProperty(key)) {
    console.log(_brave_adInfo[key]);
      document.write(_brave_adInfo[key]);
  }
}
</script>
</body>
</html>
